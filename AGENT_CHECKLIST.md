# ✅ AGENT_CHECKLIST.md

> **每次行動前的強制性檢查清單**

---

## 🔍 使用方法

**在開始任何新任務之前，必須按照順序完成以下檢查：**

1. **讀取** [AGENT_COMPASS.md](./AGENT_COMPASS.md)
2. **完成** 所有檢查項目
3. **複製** 檢查清單到你的回覆中
4. **標記** 每一項的狀態
5. **才能** 開始工作

---

## 📋 任務前檢查清單

### 第一階段：理解任務

```
□ 1. 用戶要求我做什么？
   （用一句話描述）

□ 2. 這個任務屬於哪個類別？
   [ ] 新功能開發
   [ ] Bug 修復
   [ ] 重構
   [ ] 文檔更新
   [ ] 其他

□ 3. 這個任務涉及哪些檔案？
   （列出所有相關檔案路徑）

□ 4. 這個任務的優先級？
   [ ] 🔴 緊急
   [ ] 🟡 高
   [ ] 🟢 中
   [ ] ⚪ 低
```

---

### 第二階段：文檔驗證

```
□ 5. 我已經讀過 PRODUCT_VISION.md 了嗎？
   [ ] 是
   [ ] 否 ← 如果選這個，停止並去讀

□ 6. 我已經讀過 BRAND_GUIDELINES.md 了嗎？
   [ ] 是
   [ ] 否 ← 如果選這個，停止並去讀

□ 7. 我已經讀過 ARCHITECTURE.md 了嗎？
   [ ] 是
   [ ] 否 ← 如果選這個，停止並去讀

□ 8. 我已經讀過 DEVELOPMENT_ROADMAP.md 了嗎？
   [ ] 是
   [ ] 否 ← 如果選這個，停止並去讀

□ 9. 這個任務在文檔中有明確提到嗎？
   [ ] 是 → 寫下在哪個文檔、哪個部分
   [ ] 否 → 停止並詢問用戶

   文檔位置：_______________________________

□ 10. 任務要求與文檔一致嗎？
   [ ] 是
   [ ] 否 → 停止並指出衝突

   衝突說明：_______________________________
```

---

### 第三階段：技術驗證

```
□ 11. 這個任務符合技術堆疊嗎？
   [ ] 是 (Next.js 16 + React 19 + TypeScript + Supabase)
   [ ] 否 → 停止並說明為什麼

□ 12. 這個任務符合服務層模式嗎？
   [ ] 是 (業務邏輯在 /services/)
   [ ] 否 → 需要調整

   調整方案：_______________________________

□ 13. 這個任務符合品牌指南嗎？
   [ ] 是 (顏色、字體、間距、圓角)
   [ ] 否 → 需要調整

   調整方案：_______________________________

□ 14. 這個任務符合型別定義嗎？
   [ ] 是 (使用 /types/ 中的介面)
   [ ] 否 → 需要新增型別

   新增型別：_____________________________
```

---

### 第四階段：影響分析

```
□ 15. 這個任務會影響哪些現有功能？
   （列出所有受影響的功能）

□ 16. 這個任務會破壞任何東西嗎？
   [ ] 是 → 需要風險緩解
   [ ] 否

   風險緩解方案：_________________________

□ 17. 這個任務需要更新哪些文檔？
   [ ] AGENTS.md
   [ ] ARCHITECTURE.md
   [ ] DEVELOPMENT_ROADMAP.md
   [ ] BRAND_GUIDELINES.md
   [ ] 其他

   文檔清單：_____________________________
```

---

### 第五階段：實作計劃

```
□ 18. 我的實作步驟是什麼？
   1. _____________________________________
   2. _____________________________________
   3. _____________________________________
   4. _____________________________________
   5. _____________________________________

□ 19. 我需要創建哪些新檔案？
   （列出完整路徑）

□ 20. 我需要修改哪些現有檔案？
   （列出完整路徑）

□ 21. 我需要新增哪些型別定義？
   （列出型別名稱和用途）

□ 22. 我需要新增哪些服務？
   （列出服務名稱和功能）
```

---

### 第六階段：最後確認

```
□ 23. 我已經完成所有檢查項目了嗎？
   [ ] 是

□ 24. 我確信我的實作符合所有文檔嗎？
   [ ] 是

□ 25. 我準備好開始工作了嗎？
   [ ] 是

□ 26. 用戶已經確認我的計劃了嗎？
   [ ] 是
   [ ] 否 → 先向用戶說明計劃

   計劃摘要：_____________________________
   ______________________________________
   ______________________________________
```

---

## 🚨 停止條件

**如果遇到以下情況，立即停止：**

```
❌ 任務要求與文檔衝突
❌ 任務要求違反品牌指南
❌ 任務要求違反技術架構
❌ 任務要求在文檔中找不到依據
❌ 你不確定是否符合任何規則
```

**停止時，說明原因並等待指示。**

---

## 📝 檢查清單範例

### 範例 1：新增一個元件

```
任務：創建一個新的按鈕元件

第一階段：
□ 1. 用戶要求創建一個主要按鈕元件
□ 2. 新功能開發
□ 3. components/shared/Button.tsx
□ 4. 🟡 高

第二階段：
□ 5-8. ✅ 已讀所有文檔
□ 9. 是 → BRAND_GUIDELINES.md 第 254-278 行
□ 10. 是 → 符合品牌指南

第三階段：
□ 11. 是
□ 12. 是 → UI 元件，不涉及業務邏輯
□ 13. 是 → 使用品牌色調和圓角
□ 14. 是 → 可以使用現有型別

第四階段：
□ 15. 不影響現有功能
□ 16. 否
□ 17. 不需要

第五階段：
□ 18. 步驟：
   1. 創建 Button.tsx
   2. 添加 variant 和 size props
   3. 使用 Tailwind CSS
   4. 遵守品牌圓角規範

□ 19. components/shared/Button.tsx

□ 20-22. 不適用

第六階段：
□ 23-25. ✅ 完成
□ 26. 需要確認 → 計劃已說明
```

---

### 範例 2：新增一個 API 端點

```
任務：創建故事匹配 API

第一階段：
□ 1. 用戶要求創建 /api/ai/match-stories
□ 2. 新功能開發
□ 3. app/api/ai/match-stories/route.ts
□ 4. 🔴 緊急

第二階段：
□ 5-8. ✅ 已讀所有文檔
□ 9. 是 → ARCHITECTURE.md 第 410-464 行
□ 10. 是 → storyMatcher 服務已定義

第三階段：
□ 11. 是
□ 12. 是 → 調用 services/ai/storyMatcher.ts
□ 13. 不適用 → API 端點
□ 14. 是 → 使用 types/ai.ts 中的型別

第四階段：
□ 15. 不影響現有功能
□ 16. 否
□ 17. 不需要

第五階段：
□ 18. 步驟：
   1. 創建 route.ts
   2. 從 services/ai/storyMatcher.ts 導入
   3. 驗證請求
   4. 呼叫 matchStories()
   5. 回傳結果

□ 19. app/api/ai/match-stories/route.ts

□ 20. 不適用

□ 21. 不需要 → 使用現有型別

□ 22. 不需要 → storyMatcher 已存在

第六階段：
□ 23-26. ✅ 完成
```

---

## 🎯 成功標準

**完成任務後，確認：**

```
✅ 我的代碼符合所有文檔
✅ 我的代碼通過 TypeScript 檢查
✅ 我的代碼符合品牌指南
✅ 我的代碼遵循架構模式
✅ 我的代碼不需要額外文檔說明
```

---

**版本：** 1.0
**最後更新：** 2026-02-10
**相關文檔：** [AGENT_COMPASS.md](./AGENT_COMPASS.md)
